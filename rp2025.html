<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Proyecto M60-Gold | 400m Express</title>
    
    <!-- Tailwind CSS (Estilos) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .gold-text { color: #fbbf24; }
        .gold-border { border-color: #fbbf24; }
        
        /* Utilidades para ocultar/mostrar pestañas */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease-out; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Estilos específicos para inputs */
        textarea:focus { outline: none; border-color: #fbbf24; }
        .week-btn.active { transform: scale(1.02); }
    </style>
</head>
<body class="pb-20">

    <!-- HEADER -->
    <header class="bg-slate-900 border-b border-slate-800 sticky top-0 z-50 bg-opacity-95 backdrop-blur-sm shadow-lg">
        <div class="max-w-3xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl md:text-2xl font-black tracking-tight flex items-center gap-2">
                    <span class="text-white">PROYECTO</span>
                    <span class="gold-text">M60-GOLD</span>
                </h1>
                <p class="text-[10px] text-slate-500 font-mono tracking-widest uppercase">Target: World Champion</p>
            </div>
            <div id="header-badge" class="text-right">
                <!-- Badge se inyecta via JS -->
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="max-w-3xl mx-auto px-4 py-6">
        
        <!-- WEEK SELECTOR -->
        <div class="flex space-x-2 mb-6 overflow-x-auto pb-2 scrollbar-hide" id="week-selector">
            <!-- Botones generados via JS -->
        </div>

        <!-- CONTENT CONTAINER -->
        <div id="app-container">
            <!-- El contenido de los días se renderiza aquí -->
        </div>

        <!-- NUTRITION REMINDER -->
        <div id="nutrition-card" class="mt-8 p-4 rounded-lg bg-indigo-900/20 border border-indigo-500/30 text-center">
            <!-- Texto dinámico -->
        </div>

    </main>

    <!-- FOOTER -->
    <footer class="max-w-3xl mx-auto px-4 py-8 text-center text-slate-600 text-xs">
        <p class="mb-4">M60-GOLD PROJECT | HACKING THE CLOCK</p>
        <button onclick="resetApp()" class="underline hover:text-red-500 transition-colors">
            Reiniciar Progreso
        </button>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA & CONFIG ---
        const planData = [
            {
                id: "w1", title: "SEMANA 1: RE-IGNICIÓN", dates: "1 Dic - 7 Dic", theme: "Fuerza Bruta & Mecánica", color: "amber",
                days: [
                    { id: "w1d1", day: "Lunes 1", title: "El Retorno al Templo", type: "gym", mission: "Cargar sistema nervioso. Fuerza Máxima.", workout: ["Calentamiento: 10min Bici + Movilidad", "Sentadilla Smith: 3x5 pesadas (RPE 8)", "Press Banca: 4x6 (Control total)", "Press Hombro: 3x10", "Gemelos (Pesado): 3x15"] },
                    { id: "w1d2", day: "Martes 2", title: "Recuperación Activa", type: "recovery", mission: "Limpiar piernas.", workout: ["30 min carrera suave Z1", "10 min movilidad extra"] },
                    { id: "w1d3", day: "Miércoles 3", title: "Pista - Velocidad Pura", type: "track", mission: "Estrenar evoSPEED. Tocar V-Max.", workout: ["Calentamiento + Drills", "Aceleraciones: 4x30m", "Flying 30s: 3-4 reps (Descanso largo)", "Enfriamiento suave"] },
                    { id: "w1d4", day: "Jueves 4", title: "Descanso Total", type: "rest", mission: "Recuperación del SNC.", workout: ["Comer y Dormir", "Cero actividad intensa"] },
                    { id: "w1d5", day: "Viernes 5", title: "El Motor (Tracción)", type: "gym", mission: "Reconectar cadena posterior.", workout: ["RDL Smith: Top Set 1x6-8 (Pesado)", "Remo Smith: 4x8 (Velocidad)", "Curl Bíceps: 3x12", "Pallof Press: 3x10"] },
                    { id: "w1d6", day: "Sábado 6", title: "Potencia (Cuestas)", type: "hills", mission: "Fuerza específica sin impacto.", workout: ["Calentamiento", "Sprints Cuesta: 6-8 reps x 10s (MAX)", "Bajar caminando"] },
                    { id: "w1d7", day: "Domingo 7", title: "Descanso Total", type: "rest", mission: "Cargar baterías para Hell Week.", workout: ["Proteína 2.2g/kg", "Preparación mental"] }
                ]
            },
            {
                id: "w2", title: "SEMANA 2: HELL WEEK", dates: "8 Dic - 14 Dic", theme: "Resistencia a la Velocidad", color: "red",
                days: [
                    { id: "w2d1", day: "Lunes 8", title: "Potencia Explosiva", type: "gym", mission: "Movimientos violentos.", workout: ["Box Squat: 6x3 (Pausa + Explota)", "Push Press: 4x5", "Saltos Verticales: 3x5", "Plancha lateral 3x30seg"] },
                    { id: "w2d2", day: "Martes 9", title: "Recuperación Activa", type: "recovery", mission: "Cargar tanques.", workout: ["30 min trote suave Z1", "Cena alta en Carbos"] },
                    { id: "w2d3", day: "Miércoles 10", title: "EL SIMULACRO", type: "track", mission: "Simular fatiga 400m.", workout: ["Calentamiento 20 min", "BLOQUE 1: 300m + 60s rec + 100m", "Descanso 15 min", "BLOQUE 2: 300m + 60s rec + 100m", "Sobrevivir"] },
                    { id: "w2d4", day: "Jueves 11", title: "Descanso (OBLIGATORIO)", type: "rest", mission: "Recuperar SNC frito.", workout: ["Dormir, Proteína, Hidratar", "NADA de actividad"] },
                    { id: "w2d5", day: "Viernes 12", title: "Cadena Posterior", type: "gym", mission: "Isquios rápidos.", workout: ["Swings KB/Mancuerna: 5x10", "Remo una mano: 4x8 (Explosivo)", "Bíceps/Tríceps bombeo"] },
                    { id: "w2d6", day: "Sábado 13", title: "Ritmo de Carrera", type: "track", mission: "Memorizar velocidad.", workout: ["Calentamiento", "4-5 x 200m a Ritmo Objetivo", "Recuperación total entre series"] },
                    { id: "w2d7", day: "Domingo 14", title: "Descanso Total", type: "rest", mission: "Fin de carga. Inicio Taper.", workout: ["Descanso absoluto"] }
                ]
            },
            {
                id: "w3", title: "SEMANA 3: TAPER & TRIAL", dates: "15 Dic - 20 Dic", theme: "Puesta a Punto", color: "green",
                days: [
                    { id: "w3d1", day: "Lunes 15", title: "Detonación Neural", type: "gym", mission: "SNC on, músculo off.", workout: ["Box Squat: 3x2 (Rápido)", "Saltos Verticales: 3x3", "Push Press: 3x3", "Movilidad 15 min"] },
                    { id: "w3d2", day: "Martes 16", title: "Descanso Activo", type: "recovery", mission: "Riego sanguíneo.", workout: ["20 min caminata/trote muy suave", "Masaje suave (opcional)"] },
                    { id: "w3d3", day: "Miércoles 17", title: "Ensayo de Vestuario", type: "track", mission: "Calibración final.", workout: ["Calentamiento Competición", "Strides con Clavos: 3x50m", "2 x 150m a Ritmo Carrera", "Sensación fluida"] },
                    { id: "w3d4", day: "Jueves 18", title: "Carga de Glucógeno", type: "rest", mission: "Llenar depósitos.", workout: ["Cero ejercicio", "Carbos complejos", "Hidratación"] },
                    { id: "w3d5", day: "Viernes 19", title: "Activación (Shakeout)", type: "track", mission: "Despertar piernas.", workout: ["Trote 10 min", "Movilidad dinámica", "3 Arrancadas 15m", "Descansar"] },
                    { id: "w3d6", day: "Sábado 20", title: "EL DÍA D (TIME TRIAL)", type: "race", mission: "EJECUCIÓN PERFECTA.", workout: ["0-50m: Explosión", "50-200m: Crucero", "200-300m: Curva de la Verdad", "300-400m: Sobrevivencia", "¡REGISTRA EL TIEMPO!"] }
                ]
            }
        ];

        // --- ICONS (SVG Strings) ---
        const icons = {
            gym: '<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6.5 6.5 11 11"/><path d="m21 21-1-1"/><path d="m3 3 1 1"/><path d="m18 22 4-4"/><path d="m2 6 4-4"/><path d="m3 10 7-7"/><path d="m14 21 7-7"/></svg>',
            track: '<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></svg>',
            recovery: '<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/><path d="M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"/><path d="m11 7-3 5h4l-3 5"/></svg>',
            rest: '<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.35 2.15l1.65 2.85 2.85 1.65 -2.85 1.65 -1.65 2.85 -1.65 -2.85 -2.85 -1.65 2.85 -1.65z"/><path d="M18 12l1 2 2 1 -2 1 -1 2 -1 -2 -2 -1 2 -1z"/></svg>',
            hills: '<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg>',
            race: '<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>',
            check: '<svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>'
        };

        // --- STATE MANAGEMENT ---
        let appData = JSON.parse(localStorage.getItem('m60gold_data')) || {};
        let activeWeekIndex = 0;

        function saveData() {
            localStorage.setItem('m60gold_data', JSON.stringify(appData));
            renderApp(); // Re-render to update progress bars
        }

        function toggleCheck(id) {
            appData[id] = !appData[id];
            saveData();
        }

        function saveNote(id, text) {
            appData[id] = text;
            saveData(); // No need to re-render whole app for notes, but good for safety
        }

        function resetApp() {
            if(confirm("¿Reiniciar todo el progreso?")) {
                localStorage.removeItem('m60gold_data');
                appData = {};
                location.reload();
            }
        }

        function setWeek(index) {
            activeWeekIndex = index;
            renderApp();
        }

        // --- RENDERING ---
        function renderApp() {
            const currentWeek = planData[activeWeekIndex];
            const isHellWeek = currentWeek.id === 'w2';
            const isTaper = currentWeek.id === 'w3';

            // 1. Render Header Badge
            const badgeClass = isHellWeek ? 'border-red-500 text-red-500' : (isTaper ? 'border-green-500 text-green-500' : 'border-amber-500 text-amber-500');
            document.getElementById('header-badge').innerHTML = `
                <span class="text-xs font-bold px-2 py-1 rounded border ${badgeClass}">EDICIÓN EXPRESS</span>
            `;

            // 2. Render Week Selector
            const selectorHtml = planData.map((week, idx) => {
                const isActive = idx === activeWeekIndex;
                let activeClass = '';
                
                if (isActive) {
                    if (week.color === 'red') activeClass = 'bg-red-900/40 border-red-500 text-red-400 shadow-[0_0_15px_rgba(239,68,68,0.3)]';
                    else if (week.color === 'green') activeClass = 'bg-green-900/40 border-green-500 text-green-400 shadow-[0_0_15px_rgba(34,197,94,0.3)]';
                    else activeClass = 'bg-amber-900/40 border-amber-500 text-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.3)]';
                } else {
                    activeClass = 'bg-slate-800 border-slate-700 text-slate-400';
                }

                return `
                    <button onclick="setWeek(${idx})" class="week-btn flex-1 min-w-[100px] py-3 px-4 rounded-lg font-bold transition-all duration-300 border-2 ${activeClass}">
                        <span class="block text-[10px] uppercase tracking-widest opacity-70">Semana ${idx + 1}</span>
                        <span class="text-sm whitespace-nowrap">${week.id === 'w2' ? 'HELL WEEK' : (idx === 2 ? 'TAPER' : 'RE-IGNICIÓN')}</span>
                    </button>
                `;
            }).join('');
            document.getElementById('week-selector').innerHTML = selectorHtml;

            // 3. Render Main Content (Days)
            let contentHtml = `
                <div class="mb-6 p-4 rounded-lg bg-slate-800/50 border border-slate-700 animate-[fadeIn_0.5s_ease-out]">
                    <h2 class="text-lg font-bold mb-1 ${isHellWeek ? 'text-red-400' : (isTaper ? 'text-green-400' : 'text-amber-400')}">${currentWeek.title}</h2>
                    <div class="flex justify-between items-center text-sm text-slate-400">
                        <span>${currentWeek.dates}</span>
                        <span class="italic opacity-70">${currentWeek.theme}</span>
                    </div>
                </div>
                <div class="grid grid-cols-1 gap-4">
            `;

            currentWeek.days.forEach(day => {
                const iconSvg = icons[day.type] || icons.rest;
                const noteKey = `${day.id}-note`;
                const savedNote = appData[noteKey] || "";
                
                // Progress Calculation
                let totalChecks = day.workout.length;
                let checkedCount = 0;
                
                day.workout.forEach((_, i) => {
                    if (appData[`${day.id}-check-${i}`]) checkedCount++;
                });
                
                const progress = (checkedCount / totalChecks) * 100;
                const isDone = progress === 100;

                // Dynamic Styles
                const cardBorder = isDone ? 'border-green-500/50' : (isHellWeek ? 'border-red-500/30' : 'border-amber-500/30');
                const cardBg = isDone ? 'bg-slate-800/80' : 'bg-slate-800';
                const progressBarColor = isDone ? 'bg-green-500' : (isHellWeek ? 'bg-red-600' : 'bg-amber-500');
                const iconBg = isHellWeek ? 'bg-red-900/20 text-red-500' : 'bg-amber-900/20 text-amber-500';
                const titleColor = isHellWeek ? 'text-red-100' : 'text-slate-100';

                // Checks HTML
                const checksHtml = day.workout.map((item, i) => {
                    const checkKey = `${day.id}-check-${i}`;
                    const isChecked = appData[checkKey];
                    const checkClass = isChecked ? 'bg-green-600 border-green-600 text-white' : 'border-slate-500 text-transparent';
                    const textClass = isChecked ? 'line-through text-slate-500' : 'text-slate-300';
                    
                    return `
                        <div onclick="toggleCheck('${checkKey}')" class="flex items-start space-x-3 p-2 rounded cursor-pointer hover:bg-slate-700/50">
                            <div class="mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors ${checkClass}">
                                ${icons.check}
                            </div>
                            <span class="text-sm ${textClass}">${item}</span>
                        </div>
                    `;
                }).join('');

                contentHtml += `
                    <div class="relative rounded-xl border ${cardBorder} ${cardBg} p-5 overflow-hidden transition-all">
                        <div class="absolute top-0 left-0 h-1 transition-all duration-500 ${progressBarColor}" style="width: ${progress}%"></div>
                        
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <div class="flex items-center space-x-2 mb-1">
                                    <span class="text-[10px] font-mono px-2 py-0.5 rounded ${isHellWeek ? 'bg-red-900 text-red-200' : 'bg-slate-700 text-slate-300'}">${day.day}</span>
                                    ${day.type === 'race' ? '<span class="text-[10px] font-bold bg-amber-500 text-black px-2 py-0.5 rounded animate-pulse">RACE DAY</span>' : ''}
                                </div>
                                <h3 class="text-xl font-bold ${titleColor}">${day.title}</h3>
                            </div>
                            <div class="p-2 rounded-full ${iconBg}">${iconSvg}</div>
                        </div>
                        
                        <p class="mb-4 text-sm text-slate-400 italic border-l-2 border-slate-600 pl-3">"${day.mission}"</p>
                        
                        <div class="space-y-1 mb-6">${checksHtml}</div>
                        
                        <div>
                            <label class="text-[10px] text-slate-500 uppercase tracking-wider font-bold mb-2 block">Notas del Coach / Sensaciones</label>
                            <textarea 
                                onblur="saveNote('${noteKey}', this.value)"
                                placeholder="Registra pesos, tiempos o cómo te sentiste..." 
                                class="w-full bg-slate-900/50 border border-slate-700 rounded-lg p-3 text-sm text-slate-200 resize-none h-24"
                            >${savedNote}</textarea>
                        </div>
                    </div>
                `;
            });

            contentHtml += `</div>`;
            document.getElementById('app-container').innerHTML = contentHtml;

            // 4. Update Nutrition Text
            const nutritionText = isHellWeek 
                ? "Semana 2: Cena alta en carbohidratos (pasta/arroz) antes de los Split Runs."
                : (isTaper 
                    ? "Semana 3: Hidratación agresiva. Aumentar carbos complejos Jueves y Viernes."
                    : "Semana 1: Carbos moderados. Más altos miércoles y sábado.");
            
            document.getElementById('nutrition-card').innerHTML = `
                <h4 class="text-indigo-300 font-bold mb-2 flex justify-center items-center gap-2">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
                    RECORDATORIO DE COMBUSTIBLE
                </h4>
                <p class="text-sm text-indigo-200 opacity-80">Proteína: 2.2g/kg religiosamente.<br/>${nutritionText}</p>
            `;
        }

        // --- INIT ---
        renderApp();

    </script>
</body>
</html>